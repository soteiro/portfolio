---
import BaseLayout from "../layouts/BaseLayout.astro";
import HorizontalCard from "../components/HorizontalCard.astro";
import TechTag from "../components/TechTag.astro";
import { getCollection } from "astro:content";
import Hero from "../components/Hero.astro";
const projects = await getCollection("projects");

const last_projects = projects.slice(0, 3);

const socialLinks = [
  {
    name: "GitHub",
    url: "https://github.com/diegoignacio",
    icon: "i-mdi-github",
  },
  {
    name: "LinkedIn",
    url: "https://linkedin.com/in/diegoignacio",
    icon: "i-mdi-linkedin",
  },
  {
    name: "Email",
    url: "mailto:[EMAIL_ADDRESS]",
    icon: "i-mdi-email",
  },
];

const skills = [
  "JavaScript",
  "Python",
  "Node.js",
  "React",
  "PostgreSQL",
  "IoT",
  "ESP32",
  "Docker",
  "Git",
];
---

<BaseLayout sideBarActiveItemID="home">
  <section class="animate-fade-in-up">
    <Hero />
  </section>

  <div class="divider"></div>

  <section class="mb-12 animate-fade-in-up delay-200">
    <h3 class="text-2xl font-bold mb-4 text-accent">Habilidades Técnicas</h3>
    <div class="flex flex-wrap gap-3">
      {skills.map((skill) => <TechTag tech={skill} />)}
    </div>
  </section>

  <div class="divider"></div>

  <section class="animate-fade-in-up delay-300">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-3xl font-bold text-accent">Últimos Proyectos {"</>"}</h2>
      <a href="/projects" class="btn btn-ghost btn-sm">Ver todos →</a>
    </div>

    <div class="flex flex-col gap-6">
      {
        last_projects.map((project) => (
          <HorizontalCard
            title={project.data.title}
            description={project.data.description}
            image={project.data.heroImage}
            href={`/projects/${project.slug}`}
            tags={project.data.tags}
          />
        ))
      }
    </div>
  </section>
</BaseLayout>

<style>
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-up {
    opacity: 0; /* Start hidden to avoid flicker before animation starts */
    animation: fadeInUp 0.8s ease-out forwards;
  }

  .delay-100 {
    animation-delay: 0.1s;
  }
  .delay-200 {
    animation-delay: 0.2s;
  }
  .delay-300 {
    animation-delay: 0.3s;
  }

  /* Prefer reduced motion: disable animation */
  @media (prefers-reduced-motion: reduce) {
    .animate-fade-in-up {
      opacity: 1;
      animation: none;
      transform: none;
    }
  }
</style>
